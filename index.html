<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Artificial Intelligence and Data Science</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="favicon.png">
<link rel="shortcut icon" href="favicon.png">
<link rel="apple-touch-icon" href="favicon.png">
  
<style>
:root {
  --bg-dark:#0b1220;
  --bg-card:#2a3445;
  --green:#00c853;
  --text:#e5e7eb;
}
body {
  margin:0;
  font-family:"Segoe UI",Arial,sans-serif;
  background: linear-gradient(90deg, #0b1220 0%, #0b1220 40%, #111827 100%);

  color:var(--text);
}
.hidden{display:none}
.center{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  position:fixed;
  top:0;
  left:0;
  width:100%;
  background:inherit;
}
.box{
  background:#020617;
  padding:30px;
  border-radius:15px;
  width:320px;
  max-width:400px;
  width:100%;
  text-align:center;
  margin:0 auto;
  box-sizing:border-box;
}
input,button{
  width:80%;padding:12px;margin-bottom:12px;
  border:none;border-radius:8px
}
button{background:var(--green);color:white;cursor:pointer}
.error{color:#f87171;font-size:14px}

nav{
  background:var(--green);
  padding:15px 30px;
  display:flex;justify-content:space-between;align-items:center
}
.logo{font-size:22px;font-weight:bold;color:white}
nav ul{list-style:none;display:flex;gap:25px;margin:0;padding:0}
nav li{cursor:pointer;color:white}

.container{max-width:1100px;margin:auto;padding:40px 20px;text-align:center}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:25px}
.card{background:var(--bg-card);padding:30px;border-radius:20px}
.card h2{color:#38bdf8}

/* ===== ADD START: new UI only ===== */
.option-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:25px;
  margin-top:30px;
}
.option-card{
  background:var(--bg-card);
  padding:25px;
  border-radius:18px;
  cursor:pointer;
}
.option-card h3{color:#38bdf8}
/* ===== ADD END ===== */

@keyframes fadeIn {
  from { opacity:0; transform:scale(0.98); }
  to   { opacity:1; transform:scale(1); }
}

.center,
.container{
  animation: fadeIn 0.35s ease-in-out;
}

.card,
.option-card{
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}

.card:hover,
.option-card:hover{
  transform: translateY(-6px);
  box-shadow: 0 10px 25px rgba(144, 13, 13, 0.3);
}

.fade{
  animation: fadeIn 0.35s ease-in-out;
}

/* ===== Back button animation ===== */
.back-btn,
button[onclick^="goBack"],
button[onclick^="back"]{
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.back-btn:hover,
button[onclick^="goBack"]:hover,
button[onclick^="back"]:hover{
  transform: translateX(-4px);
  box-shadow: 0 6px 15px rgba(0,0,0,0.25);
}

.back-btn:active,
button[onclick^="goBack"]:active,
button[onclick^="back"]:active{
  transform: scale(0.95);
}

/* Login & Register buttons animation */
#login button,
#register button{
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

#login button:hover,
#register button:hover{
  transform: translateY(-3px);
  box-shadow: 0 6px 15px rgba(0,0,0,0.3);
}

#login button:active,
#register button:active{
  transform: scale(0.95);
}

/* Login/Register text link animation */
#login p,
#register p{
  transition: color 0.2s ease, transform 0.2s ease;
}

#login p:hover,
#register p:hover{
  transform: translateX(4px);
  color:#7dd3fc;
}

.card:hover,
.option-card:hover{
  transform: translateY(-6px);
  box-shadow: 0 10px 25px rgba(0,0,0,0.3);
}

/* ===== Login & Register input focus animation ===== */
#login input,
#register input{
  transition: 
    border 0.25s ease,
    box-shadow 0.25s ease,
    transform 0.2s ease,
    background 0.25s ease;
}

#login input:focus,
#register input:focus{
  outline:none;
  border:2px solid #38bdf8;
  background:#020617;
  box-shadow: 0 0 0 3px rgba(56,189,248,0.25);
  transform: scale(1.03);
}

/* ===== Fix input text visibility ===== */
#login input,
#register input{
  color: #e5e7eb;        /* typed text color */
  caret-color: #38bdf8; /* blinking cursor color */
}

#login input::placeholder,
#register input::placeholder{
  color: #9ca3af;       /* placeholder color */
}
/* ===== FINAL INPUT STYLE FIX (Login & Register) ===== */
#login input,
#register input{
  background:#ffffff !important;
  color:#111827 !important;
  caret-color:#22d3ee;
  border:2px solid transparent;
  font-size:15px;
}

#login input::placeholder,
#register input::placeholder{
  color:#6b7280 !important;
}
#login input:focus,
#register input:focus{
  outline:none;
  border:2px solid #38bdf8;
  box-shadow: 0 0 0 3px rgba(56,189,248,0.25);
  transform: scale(1.03);
}
.site-footer{
  margin-top:auto;
  padding: 15px 0;
  font-size:15px;
  color:#9ca3af;
  text-align:center;
  background:var(--bg-dark);
}


/* ===== NAVBAR ANIMATION ===== */
nav{
  animation: navSlide 0.6s ease-out;
}

@keyframes navSlide{
  from{ transform: translateY(-100%); opacity:0; }
  to{ transform: translateY(0); opacity:1; }
}

.logo{
  animation: logoPop 0.6s ease-out 0.3s both;
}

@keyframes logoPop{
  from{ transform: scale(0.8); opacity:0; }
  to{ transform: scale(1); opacity:1; }
}

nav li{
  position:relative;
  transition: transform 0.25s ease, opacity 0.25s ease;
}

nav li:hover{
  transform: translateY(-3px);
  opacity:0.9;
}

nav li::after{
  content:"";
  position:absolute;
  left:0;
  bottom:-6px;
  width:0;
  height:2px;
  background:white;
  transition: width 0.3s ease;
}

nav li:hover::after{
  width:100%;
}

/* sticky footer layout */
#app{
  min-height:100vh;
  display:flex;
  flex-direction:column;
}

#dashboard{
  flex:1;
}


</style>
</head>

<body>

<!-- LOGIN -->
<div id="login" class="center">
  <div class="box">
    <h2>üîê Login</h2>
    <input id="loginId" placeholder="Student ID">
    <input id="loginOtp" placeholder="Passcode" type="password">
    <button onclick="doLogin()">Log in</button>
    <p onclick="showRegister()" style="cursor:pointer;color:#38bdf8">Register</p>
    <div class="error" id="loginError"></div>
  </div>
</div>

<!-- REGISTER -->
<div id="register" class="center hidden">
  <div class="box">
    <h2>üìù Register</h2>
    <input id="regName" placeholder="Full Name">
    <input id="regId" placeholder="Student ID">
    <input id="regEmail" placeholder="Email">
    <button onclick="doRegister()">Register</button>
    <p onclick="showLogin()" style="cursor:pointer;color:#38bdf8">Back to Login</p>
    <div id="regResult"></div>
  </div>
</div>

<!-- APP -->
<div id="app" class="hidden">

<nav>
  <div class="logo">Artificial Intelligence and Data Science</div>
  <ul>
    <li onclick="showDashboard()">Home</li>
    <li onclick="showProfile()">Profile</li>
    <li onclick="showAdmin()">Admin</li>
    <li onclick="logout()">Logout</li>
  </ul>
</nav>

<!-- DASHBOARD -->
<div id="dashboard" class="container fade">

  <div id="semesterList">
    <div class="grid">
      <div class="card">
        <h2>Spring Semester 2026</h2>
        <button onclick="openSemester()">View Details</button>
      </div>
    </div>
  </div>

  <div id="semester" class="hidden fade">
    <button onclick="goBack()" style="
      background:#7c3aed;color:white;border:none;
      padding:10px 20px;border-radius:10px;cursor:pointer;margin-bottom:25px;">
      ‚Üê Back to Semesters
    </button>

    <h2 style="color:#22d3ee;margin-bottom:30px">Spring Semester 2026</h2>

    <div class="grid">
      <div class="card"><h2>Data Science</h2>
        <button>View Details</button></div>
      <div class="card"><h2>Physics</h2>
        <button>View Details</button></div>
      <div class="card"><h2>Linear Algebra</h2>
        <button>View Details</button></div>
      <div class="card"><h2>Professional English</h2>
        <button>View Details</button></div>
      <div class="card"><h2>Physics Lab</h2>
        <button>View Details</button></div>
      <div class="card"><h2>Professional Life Skill Development</h2>
        <button>View Details</button></div>
    </div>
  </div>

  <!-- ===== ADD START: Course level ===== -->
  <div id="courseView" class="hidden fade">
    <button onclick="backToSemester()" style="background:#7c3aed;color:white;border:none;padding:10px 20px;border-radius:10px;cursor:pointer;margin-bottom:25px;">
      ‚Üê Back to Courses
    </button>
    <h2 id="courseTitle"></h2>
    <div class="option-grid">
      <div class="option-card" onclick="openExam('Mid-Term')">
        <h3>Mid-Term</h3>
        <button>View Details</button></div>
      <div class="option-card" onclick="openExam('Final')"><h3>Final</h3>
        <button>View Details</button></div>
    </div>
  </div>

  <!-- ===== ADD START: Exam level ===== -->
  <div id="examView" class="hidden fade">
    <button onclick="backToCourse()" style="background:#7c3aed;color:white;border:none;padding:10px 20px;border-radius:10px;cursor:pointer;margin-bottom:25px;">
      ‚Üê Back
    </button>
    <h2 id="examTitle"></h2>
    <div class="option-grid">
      <div class="option-card" onclick="openDrive('materials')"><h3>üìÅ Class Materials</h3></div>
      <div class="option-card" onclick="openDrive('resources')"><h3>üìö Resources</h3></div>
      <div class="option-card" onclick="openDrive('ct')"><h3>‚ùì CT Questions</h3></div>
    </div>
  </div>
  <!-- ===== ADD END ===== -->

</div>

<!-- PROFILE -->
<div id="profile" class="container hidden fade">
  <div class="card">
    <h2>üë§ Profile</h2>
    <div id="profileData"></div>
  </div>
</div>

<!-- ADMIN -->
<div id="admin" class="container hidden fade">
  <div class="card">
    <h2>üîë Admin Reset</h2>
    <input id="adminPass" placeholder="Master Password">
    <input id="adminId" placeholder="Student ID">
    <button onclick="adminReset()">Reset OTP</button>
    <p id="adminResult"></p>
  </div>
</div>

</div>

<script>
const API = "https://ads-auth.sifatraj280.workers.dev";
const SESSION_DURATION = 30 * 60 * 1000;

/* ---------- NAV ---------- */
function hideAll(){
  ["login","register","dashboard","profile","admin","app"]
  .forEach(id=>document.getElementById(id).style.display="none");
}
function showLogin(){ hideAll(); login.style.display="flex"; }
function showRegister(){ hideAll(); register.style.display="flex"; }
function showDashboard(){ hideAll(); app.style.display="block"; dashboard.style.display="block"; updateFooter("All rights reserved");}
function showAdmin(){ hideAll(); app.style.display="block"; admin.style.display="block";updateFooter("Admin"); }

/* ---------- PROFILE ---------- */
function showProfile(){
  hideAll();
  app.style.display="block";
  profile.style.display="block";
  updateFooter("Profile");

  const session = JSON.parse(localStorage.getItem("auth_session") || "{}");
  const user = session.user || {};

  profileData.innerHTML = `
    <strong style="font-size:22px">${user.name || "Unknown User"}</strong><br><br>
    Student ID: ${user.studentId || "-"}<br>
    Email: ${user.email || "-"}<br><br>
    <strong>Next Login Passcode:</strong> ${session.newOtp || "‚Äî"}
  `;
}

/* ---------- SEMESTER ---------- */
function openSemester(){
  semesterList.classList.add("hidden");
  semester.classList.remove("hidden");
  updateFooter("Spring Semester 2026");
}
function goBack(){
  semester.classList.add("hidden");
  semesterList.classList.remove("hidden");
  updateFooter("All rights reserved");
}

/* ---------- REGISTER ---------- */
async function doRegister(){
  const name = regName.value.trim();
  const studentId = regId.value.trim();
  const email = regEmail.value.trim();

  const res = await fetch(API+"/register",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ name, studentId, email })
  });

  const data = await res.json();

  if(data.otp){
    localStorage.setItem("profile_"+studentId, JSON.stringify({ name, studentId, email }));
    regResult.innerText = "Your OTP: "+data.otp;
  }
}

/* ---------- LOGIN ---------- */
async function doLogin(){
  const studentId = loginId.value.trim();
  const otp = loginOtp.value.trim();
  if(!studentId || !otp){
    loginError.innerText="Student ID and Passcode required";
    return;
  }

  const res = await fetch(API+"/login",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ studentId, otp })
  });

  const data = await res.json();
  if(!res.ok){
    loginError.innerText=data.error;
    return;
  }

  const profile = JSON.parse(localStorage.getItem("profile_"+studentId) || "{}");

  localStorage.setItem("auth_session", JSON.stringify({
    user: profile,
    newOtp: data.newOtp,
    loginTime: Date.now()
  }));

  showDashboard();
}

/* ---------- AUTO LOGIN ---------- */
(function autoLogin(){
  const session = JSON.parse(localStorage.getItem("auth_session") || "{}");

  if(session.loginTime && Date.now() - session.loginTime <= SESSION_DURATION){
    showDashboard();
  } else {
    showLogin();
  }
})();




/* ---------- LOGOUT ---------- */
function logout(){
  localStorage.removeItem("auth_session");
  location.reload();
}

/* ===== ADD START: 4-level logic (NO existing change) ===== */
let currentCourse="", currentExam="";

const driveLinks={
  "Data Science":{ "Mid-Term":{materials:"https://drive.google.com/file/d/11H3XuTEg8UA7N1S49iC7B6tFyJKX7X8R",resources:"https://drive.google.com/XXXX",ct:"https://drive.google.com/XXXX"},
                  "Final":{materials:"https://drive.google.com/XXXX",resources:"https://drive.google.com/XXXX",ct:"https://drive.google.com/XXXX"}},
  "Physics":{ "Mid-Term":{materials:"https://drive.google.com/XXXX",resources:"https://drive.google.com/XXXX",ct:"https://drive.google.com/XXXX"},
              "Final":{materials:"https://drive.google.com/XXXX",resources:"https://drive.google.com/XXXX",ct:"https://drive.google.com/XXXX"}},
  "Linear Algebra":{ "Mid-Term":{materials:"https://drive.google.com/XXXX",resources:"https://drive.google.com/XXXX",ct:"https://drive.google.com/XXXX"},
                     "Final":{materials:"https://drive.google.com/XXXX",resources:"https://drive.google.com/XXXX",ct:"https://drive.google.com/XXXX"}},
  "Professional English":{ "Mid-Term":{materials:"https://drive.google.com/XXXX",resources:"https://drive.google.com/XXXX",ct:"https://drive.google.com/XXXX"},
                            "Final":{materials:"https://drive.google.com/XXXX",resources:"https://drive.google.com/XXXX",ct:"https://drive.google.com/XXXX"}},
  "Physics Lab":{ "Mid-Term":{materials:"https://drive.google.com/XXXX",resources:"https://drive.google.com/XXXX",ct:"https://drive.google.com/XXXX"},
                  "Final":{materials:"https://drive.google.com/XXXX",resources:"https://drive.google.com/XXXX",ct:"https://drive.google.com/XXXX"}},
  "Professional Life Skill Development":{ "Mid-Term":{materials:"https://drive.google.com/XXXX",resources:"https://drive.google.com/XXXX",ct:"https://drive.google.com/XXXX"},
                                          "Final":{materials:"https://drive.google.com/XXXX",resources:"https://drive.google.com/XXXX",ct:"https://drive.google.com/XXXX"}}
};

document.querySelectorAll("#semester .grid .card").forEach(card=>{
  card.addEventListener("click",()=>{
    currentCourse=card.querySelector("h2").innerText.trim();
    semester.classList.add("hidden");
    courseView.classList.remove("hidden");
    courseTitle.innerText=currentCourse;
    updateFooter(currentCourse);
  });
});

function openExam(e){
  currentExam=e;
  courseView.classList.add("hidden");
  examView.classList.remove("hidden");
  examTitle.innerText=e;
  updateFooter(currentCourse + " / " + e);
}
function backToCourse(){
  examView.classList.add("hidden");
  courseView.classList.remove("hidden");
  updateFooter(currentCourse);
}
function backToSemester(){
  courseView.classList.add("hidden");
  semester.classList.remove("hidden");
  updateFooter("Spring Semester 2026");
}
function openDrive(t){
  window.open(driveLinks[currentCourse][currentExam][t],"_blank");
}

function updateFooter(text){
  console.log("FOOTER UPDATE:", text);

  const footer = document.getElementById("simpleFooter"); // üî• FIX
  if(footer){
    footer.innerText = "¬© 2026 ADS 250 | " + text;
  }
}

/* ---------- ADMIN RESET OTP ---------- */
async function adminReset(){
  const masterPassword = adminPass.value.trim();
  const studentId = adminId.value.trim();
  if(!masterPassword || !studentId){
    adminResult.innerText = "Enter master password and student ID";
    return;
  }
  try{
    const res = await fetch(API + "/admin-reset", {
      method: "POST",
      headers: { "Content-Type":"application/json" },
      body: JSON.stringify({
        masterPassword,
        studentId
      })
    });
    const data = await res.json();
    if(!res.ok){
      adminResult.innerText = data.error || "Reset failed";
      return;
    }
    adminResult.innerText = "New OTP: " + data.newOtp;
  }catch(err){
    adminResult.innerText = "Server error";
    console.error(err);
  }
}

/* ===== ADD END ===== */
</script>

<footer class="site-footer" id="simpleFooter">
  ¬© 2026 ADS 250 | All rights reserved
</footer>

</body>
</html>
